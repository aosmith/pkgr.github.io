<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Customizing the build</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <link rel="stylesheet" href="//yui.yahooapis.com/pure/0.5.0/pure-min.css">
  <link rel="stylesheet" href="/static/css/main.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Raleway:200,400">
  <link rel="canonical" href="https://packager.io/help/customizing-the-build/">
  <!-- <link rel="alternate" type="application/rss+xml" title="Help" href="https://packager.io/blog/feed.xml" /> -->
</head>


  <body class="pure-skin-pkgr">

    <div id="menu">
  <div class="container">
    <div class="pure-menu pure-menu-open pure-menu-horizontal">
      <a href="/" class="pure-menu-heading"><img alt="Packager" class="logo" src="/static/img/packager.svg"></a>
      <ul>
        <li><a href="/pricing">Pricing</a></li>
        <li><a href="http://blog.packager.io">Blog</a></li>
        
          
        
          
          <li class=" pure-menu-selected "><a href="/getting-started.html">Documentation</a></li>
          
        
          
        
      </ul>
    </div>
  </div>
</div>


    <div id="main">
      <div class="container">
  <div class="pure-g">
    <div class="pure-u-1-4 l-box">
      <div id="sidebar">
  <div class="pure-menu pure-menu-open">
  
    <a class="pure-menu-heading">getting-started</a>
    <ul>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li class="">
        <a href="/register/">Register with your GitHub account</a>
      </li>
    
    
    
      <li class="">
        <a href="/enable-application-for-packaging/">Enable application for packaging</a>
      </li>
    
    
    
      <li class="">
        <a href="/launch-build/">Launch your first build</a>
      </li>
    
    
    
      <li class="">
        <a href="/install-configure-run-package/">Install, configure, and run your packaged application</a>
      </li>
    
    
    </ul>
  
    <a class="pure-menu-heading">reference</a>
    <ul>
    
    
    
      <li class="">
        <a href="/help/customizing-the-build/index.html">Customizing the build</a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li class="">
        <a href="/buildpacks/">Buildpacks</a>
      </li>
    
    
    
    
    
      <li class="">
        <a href="/procfile/">Process types</a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    </ul>
  
    <a class="pure-menu-heading">guides</a>
    <ul>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    </ul>
  
  </div>
</div>

    </div>
    <div class="pure-u-3-4 l-box">
      <div class="header">
        <h1>Customizing the build</h1>
        
        <h2>Everything you need to know about the .pkgr.yml file</h2>
        
      </div>
      <div class="content"> 
        

<p>You can customize the package your get for your application by adding a <code>.pkgr.yml</code> file at the root of your project repository. This file will be parsed by Packager when a build is run.</p>

<p>You'll find all the available options explained below.</p>

<h3>
<a id="build_dependencies" class="anchor" href="#build_dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>build_dependencies</code>
</h3>

<div class="highlight highlight-html"><pre><span class="nt">&lt;style&gt;</span>
<span class="c">/*</span>
<span class="c">When setting the primary font stack, apply it to the Pure grid units along</span>
<span class="c">with `html`, `button`, `input`, `select`, and `textarea`. Pure Grids use</span>
<span class="c">specific font stacks to ensure the greatest OS/browser compatibility.</span>
<span class="c">*/</span>
<span class="nt">html</span><span class="o">,</span> <span class="nt">button</span><span class="o">,</span> <span class="nt">input</span><span class="o">,</span> <span class="nt">select</span><span class="o">,</span> <span class="nt">textarea</span><span class="o">,</span>
<span class="nc">.pure-g</span> <span class="o">[</span><span class="nt">class</span> <span class="o">*=</span> <span class="s2">"pure-u"</span><span class="o">]</span> <span class="p">{</span>
    <span class="c">/* Set your content font stack here: */</span>
    <span class="k">font-family</span><span class="o">:</span> <span class="n">Georgia</span><span class="o">,</span> <span class="n">Times</span><span class="o">,</span> <span class="s2">"Times New Roman"</span><span class="o">,</span> <span class="k">serif</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</pre></div>

<p>In some cases, some of your app dependencies (e.g. gems with C extensions in the case of Ruby projects) may only be installed if specific development headers are available. To allow for the packaging process to succeed, you must list them with the <code>build_dependencies</code> option. This must be specified as a YAML array.</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">build_dependencies</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">libicu-dev</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">libmagickcore-dev</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">libmagickwand-dev</span>
</pre></div>

<h3>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>dependencies</code>
</h3>

<p>If you application requires additional system dependencies to be installed, you can add them with the <code>dependencies</code> configuration option.</p>

<p>This must be specified as a YAML array. For instance:</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">dependencies</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="s">"libicu44</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">libicu42"</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">libpcre3</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">git-core</span>
</pre></div>

<h3>
<a id="group" class="anchor" href="#group" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>group</code>
</h3>

<p>The name of the group under which your app processes will be run. If this group does not exist on the target machine, then it will be automatically created. Defaults to <code>user</code>.</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">group</span><span class="p-Indicator">:</span> <span class="s">"custom-group-name"</span>
</pre></div>

<h3>
<a id="user" class="anchor" href="#user" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>user</code>
</h3>

<p>The name of the user under which your app processes will be run. If this user does not exist on the target machine, then it will be automatically created. Defaults to your application <code>name</code> (taken from Github, which can be overwritten in the app settings).</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="s">"custom-user-name"</span>
</pre></div>

<h3>
<a id="before_precompile" class="anchor" href="#before_precompile" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>before_precompile</code>
</h3>

<p>In the case of complex apps, you might need to do a bit of housekeeping before the packaging process can start. This can include creating files or folders that should be present for running the app (but not necessarily checked into the repository). In that case, you can add a bash script anywhere in your repository that does just that, and reference it with the <code>before_precompile</code> configuration option:</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">before_precompile</span><span class="p-Indicator">:</span> <span class="s">"packaging/debian/setup.sh"</span>
</pre></div>

<h3>
<a id="before" class="anchor" href="#before" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>before</code>
</h3>

<p>Replacement for <code>before_precompile</code>, which instead of pointing to a file, must be an array of commands to execute before the packaging process starts. e.g.:</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">before</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sudo service postgresql start</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">mv some/file to/path</span>
</pre></div>

<p>Note that <code>before_precompile</code> takes precedence over <code>before</code> if both are specified.</p>

<h3>
<a id="after_precompile" class="anchor" href="#after_precompile" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>after_precompile</code>
</h3>

<p>If you need to run a task after the buildpack compilation step is finished, you can provide a path to a file to execute:</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">after_precompile</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">path/to/file.sh</span>
</pre></div>

<h3>
<a id="after" class="anchor" href="#after" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>after</code>
</h3>

<p>Replacement for <code>after_precompile</code>, which instead of pointing to a file, must be an array of commands to execute after the buildpack compilation step is finished.</p>

<p>Note that <code>after_precompile</code> takes precedence over <code>after</code> if both are specified.</p>

<h3>
<a id="before_install" class="anchor" href="#before_install" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>before_install</code>
</h3>

<p>If you need to execute things just before the package is installed or updated on the user's machine, you can specify a <code>before_install</code> option, the value being the path to a file in your repository (it must have a shebang, e.g. <code>#!/usr/bin/env bash</code>):</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">before_install</span><span class="p-Indicator">:</span> <span class="s">"packaging/debian/preinstall.sh"</span>
</pre></div>

<p>The file will be called with the arguments given to preinstall files for the distribution where the package is being installed. For debian-based distributions, please refer to <a href="https://www.debian.org/doc/debian-policy/ch-maintainerscripts.html">https://www.debian.org/doc/debian-policy/ch-maintainerscripts.html</a>.</p>

<h3>
<a id="after_install" class="anchor" href="#after_install" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>after_install</code>
</h3>

<p>As with <code>before_install</code>, you can specify that a file be executed just after the package has been installed or updated on the user's machine:</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">after_install</span><span class="p-Indicator">:</span> <span class="s">"packaging/debian/postinstall.sh"</span>
</pre></div>

<p>The file will be called with the arguments given to postinstall files for the distribution where the package is being installed. For debian-based distributions, please refer to <a href="https://www.debian.org/doc/debian-policy/ch-maintainerscripts.html">https://www.debian.org/doc/debian-policy/ch-maintainerscripts.html</a>.</p>

<h3>
<a id="targets" class="anchor" href="#targets" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>targets</code>
</h3>

<p>This option allows to overwrite or specify configuration options for a specific target distribution. The list of available target distributions are:</p>

<ul>
<li>
<code>ubuntu-14.04</code> - for Ubuntu Trusty (14.04)</li>
<li>
<code>ubuntu-12.04</code> - for Ubuntu Precise (12.04)</li>
<li>
<code>debian-7</code> - for Debian Wheezy (7.4)</li>
<li>
<code>centos-6</code> - for CentOS 6.x</li>
</ul>

<p>Use the distribution name as a key to the <code>targets</code> hash, as follows:</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">targets</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">ubuntu-12.04</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">option1</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">value1</span>
    <span class="l-Scalar-Plain">option2</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">value2</span>
  <span class="l-Scalar-Plain">debian-7</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">option1</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">value1</span>
    <span class="l-Scalar-Plain">option3</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">value3</span>
</pre></div>

<h3>
<a id="buildpack" class="anchor" href="#buildpack" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>buildpack</code>
</h3>

<p>At the time of writing, Packager.io officially supports the packaging of Node.js and Ruby apps, through the corresponding buildpacks:</p>

<ul>
<li>NODE: <a href="https://github.com/heroku/heroku-buildpack-nodejs.git#v58">https://github.com/heroku/heroku-buildpack-nodejs.git#v58</a>
</li>
<li>RUBY: <a href="https://github.com/pkgr/heroku-buildpack-ruby.git#universal">https://github.com/pkgr/heroku-buildpack-ruby.git#universal</a>
</li>
</ul>

<p>If you want to use a different buildpack for any reason, you can do so with the <code>buildpack</code> configuration option. Though we can not ensure that the resulting package will work. Please do contact us if you run into any issue.</p>

<h3>
<a id="runner" class="anchor" href="#runner" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>runner</code>
</h3>

<p>By default, Debian 7 packages come with sysv init scripts (the ones in <code>/etc/init.d/</code>), because that distribution does not support upstart scripts by default. If you wish to force the use of upstart scripts, then you can set the <code>runner</code> configuration variable to <code>upstart-1.5</code> in your <code>.pkgr.yml</code> file:</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">targets</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">debian-7</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">runner</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">upstart-1.5</span>
</pre></div>

<p>On the contrary, upstart scripts are generated by default for Ubuntu 12.04, Ubuntu 14.04, and CentOS 6.x packages, but you can change this to use classic sysv init scripts by doing the following:</p>

<div class="highlight highlight-yaml"><pre><span class="l-Scalar-Plain">targets</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">ubuntu-12.04</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">runner</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">sysv-lsb-3.1</span>
</pre></div>

<p>Note that sysvinit scripts do not support the respawning of crashed processes.</p>


      </div>
    </div>
  </div>
</div>

    </div>

    

  </body>

</html>
